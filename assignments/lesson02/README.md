# Виртуальные функции и полиморфизм

Виртуальные функции и полиморфизм — это ключевые концепции объектно-ориентированного программирования (ООП) в C++. Они позволяют реализовать динамическое поведение объектов, которое зависит от их типа во время выполнения программы.
Виртуальные функции

Виртуальная функция — это функция-член класса, объявленная с ключевым словом virtual в базовом классе, что позволяет производным классам переопределять эту функцию для предоставления специфической реализации.

### Пример

```cpp
#include <iostream>

class Animal {
public:
    virtual void speak() {  // Виртуальная функция
        std::cout << "Animal speaks\n";
    }
};

class Dog : public Animal {
public:
    void speak() override {  // Переопределение виртуальной функции
        std::cout << "Dog barks\n";
    }
};

class Cat : public Animal {
public:
    void speak() override {  // Переопределение виртуальной функции
        std::cout << "Cat meows\n";
    }
};

int main() {
    Animal* a1 = new Dog();
    Animal* a2 = new Cat();

    a1->speak();  // Вызывает Dog::speak
    a2->speak();  // Вызывает Cat::speak

    delete a1;
    delete a2;

    return 0;
}
```

В этом примере класс Animal имеет виртуальную функцию speak(). Производные классы Dog и Cat переопределяют эту функцию, предоставляя свою реализацию. Когда функция speak() вызывается через указатель типа Animal*, C++ определяет, какую версию функции вызывать (из Dog или Cat) на основе фактического типа объекта, на который указывает указатель. Это поведение называется динамическим связыванием.
Полиморфизм

Полиморфизм (от греч. "много форм") — это возможность функции обрабатывать объекты разных типов через единый интерфейс. В контексте виртуальных функций полиморфизм позволяет писать более гибкий и расширяемый код, в котором один и тот же код может работать с объектами разных классов.

## Полиморфизм бывает двух видов:

    Компиляторный (статический) полиморфизм: реализуется с помощью перегрузки функций и шаблонов. Выбор нужной функции происходит во время компиляции.

    Исполняемый (динамический) полиморфизм: реализуется через виртуальные функции. Выбор нужной функции происходит во время выполнения программы, в зависимости от типа объекта, на который указывает указатель или ссылка.

Пример выше демонстрирует динамический полиморфизм. Объекты типа Dog и Cat ведут себя по-разному при вызове функции speak(), несмотря на то, что они рассматриваются как объекты типа Animal. Это возможно благодаря тому, что speak() объявлена как виртуальная функция в базовом классе.

## Заключение

    Виртуальные функции используются для создания функций, которые могут быть переопределены в производных классах.
    Полиморфизм позволяет использовать указатели или ссылки на базовый класс для работы с объектами производных классов, обеспечивая гибкость и расширяемость кода.

Эти концепции являются основой для построения эффективных и гибких систем на языке C++.

